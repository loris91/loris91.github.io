
<!DOCTYPE html>
<html>
 <head> 
  <title>Luci Disco</title> 
  <style>
    body{
      margin: 0;
      overflow: hidden;
    }

    #stats {  /* Align stats top-left */
      position: absolute;
      left: 0px;
      top: 0px;
    }
  </style> 
  </head>
  <body>
  <!-- JavaScript libraries -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
  <script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js"></script>
  <script src="assets/libs/tween.min.js"></script>
  <script src="assets/libs/TrackballControls.js"></script>
  <script src="assets/libs/OBJLoader.js"></script>
  <!-- Javascript code that runs our Three.js examples --> 
  <script>
    // once everything is loaded, we run our Three.js stuff.
    $(function () {

      var stats = initStats();

      // creazione della scena
      var scene = new THREE.Scene();

      // creazione della camera 
      var camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 10000);
      camera.position.set(50,50,180);
      camera.up = new THREE.Vector3(0,0,1);
      camera.lookAt(scene.position);

      // creazione trackball controls
      var trackballControls = new THREE.TrackballControls(camera);

      // creazione del renderer
      var webGLRenderer = new THREE.WebGLRenderer();
      webGLRenderer.setClearColor(new THREE.Color(0x000000, 1.0));
      webGLRenderer.setSize(window.innerWidth, window.innerHeight);



      // aggiungo 4 luci direzionali alla scena
      var light1 = new THREE.DirectionalLight(0xffffff);
      light1.position.set(5000, 5000, 1000);
      light1.intensity = 1;
      //scene.add(light1);

      var light2 = new THREE.DirectionalLight(0xffffff);
      light2.position.set(5000, -5000, 1000);
      light2.intensity = 1;
      //scene.add(light2);

      var light3 = new THREE.DirectionalLight(0xffffff);
      light3.position.set(-5000, -5000, 1000);
      light3.intensity = 1;
      //scene.add(light3);

      var light4 = new THREE.DirectionalLight(0xffffff);
      light4.position.set(-5000, 5000, 1000);
      light4.intensity = 1;
      //scene.add(light4);

      // add axis helper
      var axisHelper = new THREE.AxisHelper(1000);
      scene.add(axisHelper); 

      // aggiungo l'output del renderer agli elementi html
      $('body').append(webGLRenderer.domElement);

      var planeG = new THREE.PlaneGeometry(100,100,100,100);
      var planeM = new THREE.MeshLambertMaterial({color: 0xeeeeee, wireframe: false});
      var plane = new THREE.Mesh(planeG,planeM);
      scene.add(plane);

      var sfera = new THREE.Mesh(
        new THREE.SphereGeometry(10,12,12),
        new THREE.MeshBasicMaterial({color: 0xc0c0c0}));
      sfera.position.z = 20;
      scene.add(sfera);



      var luce1 = new THREE.Mesh(
        new THREE.CylinderGeometry(2,2,1),
        new THREE.MeshBasicMaterial({color: 0xff0000}));
      sfera.add(luce1);
      luce1.rotation.x = -Math.PI/6;
      luce1.position.set(0,10,-2);

      var red_target = new THREE.Object3D();
      luce1.add(red_target);
      red_target.position.y = 50;

      var redlight = new THREE.SpotLight(0xff0000);
      redlight.target = red_target;
      redlight.intensity = 5;
      redlight.angle = Math.PI/36;
      luce1.add(redlight);

      var luce2 = new THREE.Mesh(
      new THREE.CylinderGeometry(2,2,1),
      new THREE.MeshBasicMaterial({color: 0x00ff00}));
      sfera.add(luce2);
      luce2.rotation.x = Math.PI/6;
      luce2.position.set(0,-10,-2);

      var green_target = new THREE.Object3D();
      luce2.add(green_target);
      green_target.position.y = -50;

      var greenlight = new THREE.SpotLight(0x00ff00);
      greenlight.target = green_target;
      greenlight.intensity = 5;
      greenlight.angle = Math.PI/36;      
      luce2.add(greenlight);

      var luce3 = new THREE.Mesh(
      new THREE.CylinderGeometry(2,2,1),
      new THREE.MeshBasicMaterial({color: 0x0000ff}));
      sfera.add(luce3);
      luce3.rotation.z = -Math.PI/2;
      luce3.rotation.x = Math.PI/6;
      luce3.position.set(10,0,-2);

      var blue_target = new THREE.Object3D();
      luce3.add(blue_target);
      green_target.position.x = 50;

      var bluelight = new THREE.SpotLight(0x0000ff);
      bluelight.target = blue_target;
      bluelight.intensity = 5;
      bluelight.angle = Math.PI/36;      
      luce3.add(bluelight);

      var axisHelper2 = new THREE.AxisHelper(100);
      luce3.add(axisHelper2);






      var disco = new TWEEN.Tween(sfera.rotation)
        .to ({z: 2*Math.PI},1000)
        .repeat(Infinity)
        //.start();






      render();

      function render() {
        stats.update();
        trackballControls.update();
        TWEEN.update();
        
        requestAnimationFrame(render);
        webGLRenderer.render(scene, camera);
      }
          
      function initStats() {
        var stats = new Stats();
        stats.setMode(0); // 0: fps, 1: ms
        $('body').append(stats.domElement);
        return stats;
      }
    });
  </script>  
 </body>
</html>
